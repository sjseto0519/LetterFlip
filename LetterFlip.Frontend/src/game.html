<template>
  <div class="bg-gradient-to-r from-green-400 to-blue-500 text-white p-4 fixed w-full z-50">
    <div class="container mx-auto">
      <div class="flex items-center justify-between">
        <!-- Left: Title -->
        <div class="text-lg font-semibold">
          Letter<span class="flip-text text-blue-500">Flip</span>
        </div>
  
        <!-- Center: Player Names -->
        <div class="text-base">
          ${playerName} vs ${otherPlayerName}
        </div>
  
        <!-- Right: Buttons -->
        <div class="space-x-4">
          <button click.delegate="toggleHistory()" class="btn btn-accent">History</button>
          <button click.delegate="toggleGuessLetterModal()" class="btn btn-accent">Guess a Letter</button>
          <button click.delegate="toggleGuessWordModal()" class="btn btn-accent">Guess a Word</button>
          <button click.delegate="exitGame()" class="btn btn-accent">Exit Game</button>
        </div>
      </div>
    </div>
  </div>  
  <div class="drawer">
    <input id="history-drawer" type="checkbox" class="drawer-toggle" checked.bind="showHistory"/>
    <div class="drawer-content">
      <canvas id="renderCanvas"></canvas>
    </div>
    <div class="drawer-side">
      <label for="history-drawer" aria-label="close sidebar" class="drawer-overlay"></label>
      <ul class="menu p-4 w-80 min-h-full bg-base-200 text-base-content">
        <li repeat.for="item of historyItems" class="hover:bg-gray-200 rounded p-2 text-center">
          ${item}
        </li>
      </ul>
    </div>
  </div>  
  <!-- Guess a Letter Modal -->
<div class="modal modal-open" if.bind="showGuessLetterModal">
  <div class="modal-box">
    <h2 class="text-lg">Guess a Letter</h2>
    <div class="flex space-x-2">
      <input repeat.for="position of guessedPositions"
             type="text" 
             value.bind="position" 
             placeholder="-" 
             maxlength="1"
             input.trigger="updateGuess($index, $event.target.value)"
             class="input input-bordered w-8 text-center p-0">
    </div>
    <div class="modal-action">
      <button class="btn btn-primary" click.delegate="submitLetterGuess()">Submit Guess</button>
      <button class="btn" click.delegate="toggleGuessLetterModal()">Close</button>
    </div>
  </div>
</div>
<!-- Guess a Word Modal -->
<div class="modal modal-open" if.bind="showGuessWordModal">
  <div class="modal-box">
    <h2 class="text-lg">Guess a Word</h2>
    <input type="text" value.bind="guessedWord" placeholder="Enter a word" class="input input-bordered">
    <div class="modal-action">
      <button class="btn btn-primary" click.delegate="submitWordGuess()">Submit Guess</button>
      <button class="btn" click.delegate="toggleGuessWordModal()">Close</button>
    </div>
  </div>
</div>
<!-- Game Over Modal -->
<div class="modal modal-open" if.bind="isGameOver">
  <div class="modal-box">
    <h2 class="text-lg">Game Over</h2>
    <p>${winner} is the winner!</p>
    <div class="modal-action">
      <button class="btn btn-primary" disabled.bind="isNewGameRequested" click.delegate="playNewGame()">
        <svg if.bind="isNewGameRequested" class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        Play New Game
      </button>
      <button class="btn btn-accent" click.delegate="exitGame()">Exit</button>
    </div>
  </div>
</div>
<div class="fixed bottom-4 right-4" if.bind="this.historyItems.length > 0">
  <div class="alert shadow-lg">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-info shrink-0 w-6 h-6">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
    </svg>
    <div if.bind="showLastActionToast" >
      <h3 class="font-bold">Last Action</h3>
      <div class="text-xs">${this.historyItems[this.historyItems.length - 1]}</div>
    </div>
    <button class="btn btn-sm" hidden.bind="showLastActionToast === false" click.delegate="showLastActionToast = false">Hide</button>
    <button class="btn btn-sm" hidden.bind="showLastActionToast === true" click.delegate="showLastActionToast = true">Show</button>
  </div>
</div>
<div class="bg-gradient-to-r from-green-400 to-blue-500 text-white p-4 fixed bottom-[-3px] left-0 h-[3rem] w-full z-50">

</div>
  </template>